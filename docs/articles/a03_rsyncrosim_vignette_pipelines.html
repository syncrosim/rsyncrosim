<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>`rsyncrosim`: introduction to pipelines • rsyncrosim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="`rsyncrosim`: introduction to pipelines">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rsyncrosim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a01_rsyncrosim_vignette_basic.html">Introduction to `rsyncrosim`</a></li>
    <li><a class="dropdown-item" href="../articles/a02_rsyncrosim_vignette_uncertainty.html">`rsyncrosim`: introduction to uncertainty</a></li>
    <li><a class="dropdown-item" href="../articles/a03_rsyncrosim_vignette_pipelines.html">`rsyncrosim`: introduction to pipelines</a></li>
    <li><a class="dropdown-item" href="../articles/a04_rsyncrosim_vignette_spatial.html">`rsyncrosim`: introduction to spatial data</a></li>
    <li><a class="dropdown-item" href="../articles/a05_rsyncrosim_stsim_vignette.html">`rsyncrosim`: introduction to `ST-Sim`</a></li>
    <li><a class="dropdown-item" href="../articles/a06_rsyncrosim_install_github.html">Installing GitHub release</a></li>
    <li><a class="dropdown-item" href="../articles/using-conda-with-rsyncrosim.html">Conda Demo</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/syncrosim/rsyncrosim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>`rsyncrosim`: introduction to pipelines</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/syncrosim/rsyncrosim/blob/HEAD/vignettes/a03_rsyncrosim_vignette_pipelines.Rmd" class="external-link"><code>vignettes/a03_rsyncrosim_vignette_pipelines.Rmd</code></a></small>
      <div class="d-none name"><code>a03_rsyncrosim_vignette_pipelines.Rmd</code></div>
    </div>

    
    
<p>This vignette will cover how to implement model pipelines using the
<code>rsyncrosim</code> package within the
<a href="https://syncrosim.com/" target="_blank" class="external-link">SyncroSim</a> software
framework. For an overview of
<a href="https://syncrosim.com/" target="_blank" class="external-link">SyncroSim</a> and
<a href="https://cran.r-project.org/web/packages/rsyncrosim/index.html" target="_blank" class="external-link"><code>rsyncrosim</code></a>,
as well as a basic usage tutorial for <code>rsyncrosim</code>, see the
<a href="https://syncrosim.github.io/rsyncrosim/articles/a01_rsyncrosim_vignette_basic.html" target="_blank">Introduction
to <code>rsyncrosim</code></a> vignette. To learn how to use iterations
in the <code>rsyncrosim</code> interface, see the
<a href="https://syncrosim.github.io/rsyncrosim/articles/a02_rsyncrosim_vignette_uncertainty.html" target="_blank"><code>rsyncrosim</code>:
introduction to uncertainty</a> vignette.</p>
<div class="section level2">
<h2 id="syncrosim-package-helloworldpipeline">SyncroSim Package: <code>helloworldPipeline</code><a class="anchor" aria-label="anchor" href="#syncrosim-package-helloworldpipeline"></a>
</h2>
<p>To demonstrate how to link models in a pipeline using the
<code>rsyncrosim</code> interface, we will need the
<a href="https://github.com/ApexRMS/helloworldPipeline" target="_blank" class="external-link">helloworldPipeline</a>
SyncroSim package. <code>helloworldPipeline</code> was designed to be a
simple package to introduce pipelines to SyncroSim modeling workflows.
Models (i.e. transformers) connected by pipelines allow the user to
implement multiple transformers in a modeling workflow and access
intermediate outputs of a transformer without having to create multiple
scenarios.</p>
<p>The package takes from the user 3 inputs, <em>mMean</em>,
<em>mSD</em>, and <em>b</em>. For each iteration, a value <em>m</em>,
representing the slope, is sampled from a normal distribution with mean
of <em>mMean</em> and standard deviation of <em>mSD</em>. The <em>b</em>
value represents the intercept. In the first model in the pipeline,
these input values are run through a linear model, <em>y=mt+b</em>,
where <em>t</em> is <em>time</em>, and the <em>y</em> value is returned
as output. The second model takes <em>y</em> as input and calculates the
cumulative sum of <em>y</em> over time, returning a new variable
<em>yCum</em> as output.</p>
<div class="float">
<img src="infographic-pipeline.png" width="600" alt="Infographic of helloworldPipeline package"><div class="figcaption">Infographic of helloworldPipeline package</div>
</div>
<p>For more details on the different features of the
<code>helloworldPipeline</code> SyncroSim package, consult the SyncroSim
<a href="https://docs.syncrosim.com/how_to_guides/package_create_pipelines.html" target="_blank" class="external-link">Enhancing
a Package: Linking Models</a> tutorial.</p>
</div>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="section level3">
<h3 id="install-syncrosim">Install SyncroSim<a class="anchor" aria-label="anchor" href="#install-syncrosim"></a>
</h3>
<p>Before using <code>rsyncrosim</code> you will first need to
<a href="https://syncrosim.com/download/" target="_blank" class="external-link">download and
install</a> the SyncroSim software. Versions of SyncroSim exist for both
Windows and Linux.</p>
<p><em>Note</em>: this tutorial was developed using
<code>rsyncrosim</code> version 2.0. To use <code>rsyncrosim</code>
version 2.0 or greater, SyncroSim version 3.0 or greater is
required.</p>
</div>
<div class="section level3">
<h3 id="installing-and-loading-r-packages">Installing and loading R packages<a class="anchor" aria-label="anchor" href="#installing-and-loading-r-packages"></a>
</h3>
<p>You will need to install the <code>rsyncrosim</code> R package,
either using
<a href="https://cran.r-project.org/" target="_blank" class="external-link">CRAN</a> or from
the <code>rsyncrosim</code>
<a href="https://github.com/syncrosim/rsyncrosim/releases/" target="_blank" class="external-link">GitHub
repository</a>. Versions of <code>rsyncrosim</code> are available for
both Windows and Linux.</p>
<p>In a new R script, load the <code>rsyncrosim</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load R package for working with SyncroSim</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rsyncrosim</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="connecting-r-to-syncrosim-using-session">Connecting R to SyncroSim using <code>session()</code><a class="anchor" aria-label="anchor" href="#connecting-r-to-syncrosim-using-session"></a>
</h3>
<p>Finish setting up the R environment for the <code>rsyncrosim</code>
workflow by creating a SyncroSim Session object. Use the
<code><a href="../reference/session.html">session()</a></code> function to connect R to your installed copy of
the SyncroSim software.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="st">"path/to/install_folder"</span><span class="op">)</span>      <span class="co"># Create a Session based SyncroSim install folder</span></span>
<span><span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="op">)</span>                              <span class="co"># Using default install folder (Windows only)</span></span>
<span><span class="va">mySession</span>                                           <span class="co"># Displays the Session object</span></span></code></pre></div>
<pre><code><span><span class="co">## class               : Session</span></span>
<span><span class="co">## filepath [character]: C:/Program Files/SyncroSim Studio</span></span>
<span><span class="co">## silent [logical]    : TRUE</span></span>
<span><span class="co">## printCmd [logical]  : FALSE</span></span>
<span><span class="co">## condaFilepath [NULL]:</span></span></code></pre>
<p>Use the <code><a href="../reference/version.html">version()</a></code> function to ensure you are using the
latest version of SyncroSim.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/version.html">version</a></span><span class="op">(</span><span class="va">mySession</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "3.0.9"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="installing-syncrosim-packages-using-installpackage">Installing SyncroSim packages using
<code>installPackage()</code><a class="anchor" aria-label="anchor" href="#installing-syncrosim-packages-using-installpackage"></a>
</h3>
<p>Install <code>helloworldPipeline</code> using the
<code>rynscrosim</code> function <code><a href="../reference/installPackage.html">installPackage()</a></code>. This
function takes a package name as input and then queries the SyncroSim
package server for the specified package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install helloworldPipeline</span></span>
<span><span class="fu"><a href="../reference/installPackage.html">installPackage</a></span><span class="op">(</span><span class="st">"helloworldPipeline"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Package &lt;helloworldPipeline v2.0.0&gt; installed</span></span></code></pre>
<p><code>helloworldPipeline</code> should now be included in the package
list returned by the <code><a href="../reference/packages.html">packages()</a></code> function in
<code>rsyncrosim</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get list of installed packages</span></span>
<span><span class="fu"><a href="../reference/packages.html">packages</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                 name version</span></span>
<span><span class="co">## 1 helloworldPipeline   2.0.0</span></span>
<span><span class="co">##                                                  description</span></span>
<span><span class="co">## 1 Example demonstrating how to use pipelines with an R model</span></span>
<span><span class="co">##                                                                                  location</span></span>
<span><span class="co">## 1 C:\\Users\\birch\\AppData\\Local\\SyncroSim Studio\\Packages\\helloworldPipeline\\2.0.0</span></span>
<span><span class="co">##   status</span></span>
<span><span class="co">## 1     OK</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="create-a-modeling-workflow">Create a modeling workflow<a class="anchor" aria-label="anchor" href="#create-a-modeling-workflow"></a>
</h2>
<p>When creating a new modeling workflow from scratch, we need to create
objects of the following scopes:</p>
<ul>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank" class="external-link">Library</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank" class="external-link">Projects</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank" class="external-link">Scenarios</a></li>
</ul>
<p>For more information on these scopes, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_basic.html">Introduction
to <code>rsyncrosim</code></a> vignette.</p>
<div class="section level3">
<h3 id="set-up-library-project-and-scenario">Set up library, project, and scenario<a class="anchor" aria-label="anchor" href="#set-up-library-project-and-scenario"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a new library</span></span>
<span><span class="va">myLibrary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ssimLibrary.html">ssimLibrary</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"helloworldLibrary.ssim"</span>,</span>
<span>                         session <span class="op">=</span> <span class="va">mySession</span>,</span>
<span>                         package <span class="op">=</span> <span class="st">"helloworldPipeline"</span>,</span>
<span>                         overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Package &lt;helloworldPipeline v2.0.0&gt; added</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Open the default project</span></span>
<span><span class="va">myProject</span> <span class="op">=</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myLibrary</span>, project <span class="op">=</span> <span class="st">"Definitions"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a new scenario (associated with the default project)</span></span>
<span><span class="va">myScenario</span> <span class="op">=</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myProject</span>, scenario <span class="op">=</span> <span class="st">"My first scenario"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="view-model-inputs-using-datasheet">View model inputs using <code>datasheet()</code><a class="anchor" aria-label="anchor" href="#view-model-inputs-using-datasheet"></a>
</h3>
<p>View the datasheets associated with your new scenario using the
<code><a href="../reference/datasheet.html">datasheet()</a></code> function from <code>rsyncrosim</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View all datasheets associated with a library, project, or scenario</span></span>
<span><span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       scope                                     name             displayName</span></span>
<span><span class="co">## 23 scenario                   core_DistributionValue           Distributions</span></span>
<span><span class="co">## 24 scenario               core_ExternalVariableValue      External Variables</span></span>
<span><span class="co">## 25 scenario                            core_Pipeline                Pipeline</span></span>
<span><span class="co">## 26 scenario              core_SpatialMultiprocessing Spatial Multiprocessing</span></span>
<span><span class="co">## 27 scenario        helloworldPipeline_InputDatasheet                  Inputs</span></span>
<span><span class="co">## 28 scenario helloworldPipeline_IntermediateDatasheet    Intermediate Outputs</span></span>
<span><span class="co">## 29 scenario       helloworldPipeline_OutputDatasheet                 Outputs</span></span>
<span><span class="co">## 30 scenario            helloworldPipeline_RunControl             Run Control</span></span></code></pre>
<p>From the list of datasheets above, we can see that there are four
datasheets specific to the <code>helloworldPipeline</code> package,
including an <code>Inputs</code> datasheet, an
<code>Intermediate Outputs</code> datasheet, and an <code>Outputs</code>
datasheet. These three datasheets are connected by transformers. The
values from the <code>Inputs</code> datasheet are used as the input for
the first transformer, which <em>transforms</em> the input data to
output data through a series of model calculations. The output data from
the first transformer is contained within the
<code>Intermediate Outputs</code> datasheet. The values from the
<code>Intermediate Outputs</code> datasheet are then used as input for
the second transformer. The output from the second transformer is stored
in the <code>Outputs</code> datasheet.</p>
</div>
<div class="section level3">
<h3 id="configure-model-inputs-using-datasheet-and-addrow">Configure model inputs using <code>datasheet()</code> and
<code>addRow()</code><a class="anchor" aria-label="anchor" href="#configure-model-inputs-using-datasheet-and-addrow"></a>
</h3>
<p>Currently our input scenario datasheets are empty! We need to add
some values to our <code>Inputs</code> datasheet
(<code>InputDatasheet</code>) and Run Control datasheet
(<code>RunControl</code>) so we can run our model. We also need to add
some information to the core <code>Pipeline</code> datasheet to specify
which transformers are run in which order.</p>
<p><strong>Inputs Datasheet</strong></p>
<p>First, assign the contents of the <code>Inputs</code> datasheet to a
new data frame variable using <code><a href="../reference/datasheet.html">datasheet()</a></code>, then check the
columns that need input values.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load Inputs datasheet to a new R data frame</span></span>
<span><span class="va">myInputDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>,</span>
<span>                              name <span class="op">=</span> <span class="st">"helloworldPipeline_InputDatasheet"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the columns of the input data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">myInputDataframe</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 'data.frame':    0 obs. of  3 variables:</span></span>
<span><span class="co">##  $ mMean: num </span></span>
<span><span class="co">##  $ mSD  : num </span></span>
<span><span class="co">##  $ b    : num</span></span></code></pre>
<p>The <code>Inputs</code> datasheet requires three values:</p>
<ul>
<li>
<code>mMean</code> : the mean of the slope normal distribution.</li>
<li>
<code>mSD</code> : the standard deviation of the slope normal
distribution.</li>
<li>
<code>b</code> : the intercept of the linear equation.</li>
</ul>
<p>Add these values to a new data frame, then use the
<code><a href="../reference/addRow.html">addRow()</a></code> function from <code>rsyncrosim</code> to update
the input data frame</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create input data and add it to the input data frame</span></span>
<span><span class="va">myInputRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>mMean <span class="op">=</span> <span class="fl">2</span>, mSD <span class="op">=</span> <span class="fl">4</span>, b <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">myInputDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">myInputDataframe</span>, <span class="va">myInputRow</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check values</span></span>
<span><span class="va">myInputDataframe</span></span></code></pre></div>
<pre><code><span><span class="co">##   mMean mSD b</span></span>
<span><span class="co">## 1     2   4 3</span></span></code></pre>
<p>Finally, save the updated R data frame to a SyncroSim datasheet using
<code><a href="../reference/saveDatasheet.html">saveDatasheet()</a></code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save input R data frame to a SyncroSim datasheet</span></span>
<span><span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, </span>
<span>              data <span class="op">=</span> <span class="va">myInputDataframe</span>,</span>
<span>              name <span class="op">=</span> <span class="st">"helloworldPipeline_InputDatasheet"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Datasheet &lt;helloworldPipeline_InputDatasheet&gt; saved</span></span></code></pre>
<p><strong>Run Control Datasheet</strong></p>
<p>The <code>Run Control</code> datasheet provides information about how
many time steps and iterations to use in the model. Here, we set the
number of iterations, as well as the minimum and maximum time steps for
our model. Let’s take a look at the columns that need input values.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load Run Control datasheet to a new R data frame</span></span>
<span><span class="va">runSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, name <span class="op">=</span> <span class="st">"helloworldPipeline_RunControl"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the columns of the Run Control data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">runSettings</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 'data.frame':    0 obs. of  3 variables:</span></span>
<span><span class="co">##  $ MinimumTimestep : num </span></span>
<span><span class="co">##  $ MaximumTimestep : num </span></span>
<span><span class="co">##  $ MaximumIteration: num</span></span></code></pre>
<p>The Run Control datasheet requires the following 3 columns:</p>
<ul>
<li>
<code>MaximumIteration</code> : total number of iterations to run
the model for.</li>
<li>
<code>MinimumTimestep</code> : the starting time point of the
simulation.</li>
<li>
<code>MaximumTimestep</code> : the end time point of the
simulation.</li>
</ul>
<p><em>Note:</em> A fourth hidden column, <code>MinimumIteration</code>,
also exists in the Run Control datasheet (default=1).</p>
<p>We’ll add this information to a new data frame and then add it to the
Run Control data frame using <code><a href="../reference/addRow.html">addRow()</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create Run Control data and add it to the Run Control data frame</span></span>
<span><span class="va">runSettingsRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>MaximumIteration <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                             MinimumTimestep <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                             MaximumTimestep <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">runSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">runSettings</span>, <span class="va">runSettingsRow</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check values</span></span>
<span><span class="va">runSettings</span></span></code></pre></div>
<pre><code><span><span class="co">##   MinimumTimestep MaximumTimestep MaximumIteration</span></span>
<span><span class="co">## 1               1              10                5</span></span></code></pre>
<p>Finally, save the R data frame to a SyncroSim datasheet using
<code><a href="../reference/saveDatasheet.html">saveDatasheet()</a></code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save Run Control R data frame to a SyncroSim datasheet</span></span>
<span><span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, data <span class="op">=</span> <span class="va">runSettings</span>,</span>
<span>              name <span class="op">=</span> <span class="st">"helloworldPipeline_RunControl"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Datasheet &lt;helloworldPipeline_RunControl&gt; saved</span></span></code></pre>
<p><strong>Pipeline Datasheet</strong></p>
<p>To implement pipelines in our package, we need to specify the order
in which to run the transformers in our pipeline by adding data to the
<code>Pipeline</code> datasheet. The <code>Pipeline</code> datasheet is
a built-in SyncroSim datasheet, meaning that it comes with every
SyncroSim library regardless of which packages that library uses. We
access it using the “core_” prefix with the <code><a href="../reference/datasheet.html">datasheet()</a></code>
function.</p>
<p>From viewing the structure of the <code>Pipeline</code> datasheet we
know that the <code>StageNameId</code> is a factor with two levels:</p>
<ul>
<li>Hello World Pipeline 1 (R)</li>
<li>Hello World Pipeline 2 (R)</li>
</ul>
<p>We will set the data for this datasheet such that
<code>Hello World Pipeline 1 (R)</code> is run first, then
<code>Hello World Pipeline 2 (R)</code>. This way, the output from
<code>Hello World Pipeline 1 (R)</code> is used as the input for
<code>Hello World Pipeline 2 (R)</code>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load Pipeline datasheet to a new R data frame</span></span>
<span><span class="va">myPipelineDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, name <span class="op">=</span> <span class="st">"core_Pipeline"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the columns of the Pipeline data frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">myPipelineDataframe</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 'data.frame':    0 obs. of  2 variables:</span></span>
<span><span class="co">##  $ StageNameId: Factor w/ 2 levels "Hello World Pipeline 1 (R)",..: </span></span>
<span><span class="co">##  $ RunOrder   : num</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create Pipeline data and add it to the Pipeline data frame</span></span>
<span><span class="va">myPipelineRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>StageNameId <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hello World Pipeline 1 (R)"</span>, </span>
<span>                                            <span class="st">"Hello World Pipeline 2 (R)"</span><span class="op">)</span>,</span>
<span>                            RunOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">myPipelineDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">myPipelineDataframe</span>, <span class="va">myPipelineRow</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check values</span></span>
<span><span class="va">myPipelineDataframe</span></span></code></pre></div>
<pre><code><span><span class="co">##                  StageNameId RunOrder</span></span>
<span><span class="co">## 1 Hello World Pipeline 1 (R)        1</span></span>
<span><span class="co">## 2 Hello World Pipeline 2 (R)        2</span></span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save Pipeline R data frame to a SyncroSim datasheet</span></span>
<span><span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, data <span class="op">=</span> <span class="va">myPipelineDataframe</span>,</span>
<span>              name <span class="op">=</span> <span class="st">"core_Pipeline"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Datasheet &lt;core_Pipeline&gt; saved</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="run-scenarios">Run Scenarios<a class="anchor" aria-label="anchor" href="#run-scenarios"></a>
</h2>
<div class="section level3">
<h3 id="setting-run-parameters-with-run">Setting run parameters with <code>run()</code><a class="anchor" aria-label="anchor" href="#setting-run-parameters-with-run"></a>
</h3>
<p>We will now run our scenario using the <code><a href="../reference/run.html">run()</a></code> function in
<code>rsyncrosim</code>.</p>
<p>If we have a large model and we want to parallelize the run using
multiprocessing, we can modify the library-scoped “core_Multiprocessing”
datasheet. Since we are using five iterations in our model, we will set
the number of jobs to five so each multiprocessing core will run a
single iteration.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load list of available library-scoped datasheets</span></span>
<span><span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myLibrary</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      scope                      name             displayName</span></span>
<span><span class="co">## 1  library               core_Backup                  Backup</span></span>
<span><span class="co">## 2  library             core_JlConfig                   Julia</span></span>
<span><span class="co">## 3  library      core_Multiprocessing         Multiprocessing</span></span>
<span><span class="co">## 4  library               core_Option                 Options</span></span>
<span><span class="co">## 5  library core_ProcessorGroupOption Processor Group Options</span></span>
<span><span class="co">## 6  library  core_ProcessorGroupValue  Processor Group Values</span></span>
<span><span class="co">## 7  library             core_PyConfig                  Python</span></span>
<span><span class="co">## 8  library              core_RConfig                       R</span></span>
<span><span class="co">## 9  library              core_Setting                Settings</span></span>
<span><span class="co">## 10 library        core_SpatialOption         Spatial Options</span></span>
<span><span class="co">## 11 library            core_SysFolder                 Folders</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the library-scoped multiprocessing datasheet</span></span>
<span><span class="va">multiprocess</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myLibrary</span>, name <span class="op">=</span> <span class="st">"core_Multiprocessing"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check required inputs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">multiprocess</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 'data.frame':    1 obs. of  4 variables:</span></span>
<span><span class="co">##  $ EnableMultiprocessing  : logi FALSE</span></span>
<span><span class="co">##  $ MaximumJobs            : num 7</span></span>
<span><span class="co">##  $ EnableMultiScenario    : logi FALSE</span></span>
<span><span class="co">##  $ EnableCopyExternalFiles: logi NA</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enable multiprocessing</span></span>
<span><span class="va">multiprocess</span><span class="op">$</span><span class="va">EnableMultiprocessing</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span>
<span></span>
<span><span class="co"># Set maximum number of jobs to 5</span></span>
<span><span class="va">multiprocess</span><span class="op">$</span><span class="va">MaximumJobs</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Save multiprocessing configuration</span></span>
<span><span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myLibrary</span>, </span>
<span>              data <span class="op">=</span> <span class="va">multiprocess</span>, </span>
<span>              name <span class="op">=</span> <span class="st">"core_Multiprocessing"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Datasheet &lt;core_Multiprocessing&gt; saved</span></span></code></pre>
<p>Now, when we run our scenario, it will use the desired
multiprocessing configuration.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Run the first scenario we created</span></span>
<span><span class="va">myResultScenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">myScenario</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Running scenario [1] My first scenario"</span></span></code></pre>
<p>Once the run is complete, we can compare the original scenario to the
result scenario to see which datasheets have been modified. Using the
<code><a href="../reference/datasheet.html">datasheet()</a></code> function with the <code>optional</code>
argument set to <code>TRUE</code>, we see that data has been added to
both the <code>Intermediate Outputs</code> and <code>Outputs</code>
datasheets after running the scenario (see <code>data</code> column
below).</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datasheets for original scenario</span></span>
<span><span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, optional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       scope            package                                     name</span></span>
<span><span class="co">## 5  scenario               core                   core_DistributionValue</span></span>
<span><span class="co">## 7  scenario               core               core_ExternalVariableValue</span></span>
<span><span class="co">## 15 scenario               core                            core_Pipeline</span></span>
<span><span class="co">## 21 scenario               core              core_SpatialMultiprocessing</span></span>
<span><span class="co">## 27 scenario helloworldPipeline        helloworldPipeline_InputDatasheet</span></span>
<span><span class="co">## 28 scenario helloworldPipeline helloworldPipeline_IntermediateDatasheet</span></span>
<span><span class="co">## 29 scenario helloworldPipeline       helloworldPipeline_OutputDatasheet</span></span>
<span><span class="co">## 30 scenario helloworldPipeline            helloworldPipeline_RunControl</span></span>
<span><span class="co">##                displayName isSingle displayMember  data scenario</span></span>
<span><span class="co">## 5            Distributions    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 7       External Variables    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 15                Pipeline    FALSE           N/A  TRUE        1</span></span>
<span><span class="co">## 21 Spatial Multiprocessing     TRUE           N/A FALSE        1</span></span>
<span><span class="co">## 27                  Inputs     TRUE           N/A  TRUE        1</span></span>
<span><span class="co">## 28    Intermediate Outputs    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 29                 Outputs    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 30             Run Control     TRUE           N/A  TRUE        1</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datasheets for result scenario</span></span>
<span><span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myResultScenario</span>, optional <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       scope            package                                     name</span></span>
<span><span class="co">## 5  scenario               core                   core_DistributionValue</span></span>
<span><span class="co">## 7  scenario               core               core_ExternalVariableValue</span></span>
<span><span class="co">## 15 scenario               core                            core_Pipeline</span></span>
<span><span class="co">## 21 scenario               core              core_SpatialMultiprocessing</span></span>
<span><span class="co">## 27 scenario helloworldPipeline        helloworldPipeline_InputDatasheet</span></span>
<span><span class="co">## 28 scenario helloworldPipeline helloworldPipeline_IntermediateDatasheet</span></span>
<span><span class="co">## 29 scenario helloworldPipeline       helloworldPipeline_OutputDatasheet</span></span>
<span><span class="co">## 30 scenario helloworldPipeline            helloworldPipeline_RunControl</span></span>
<span><span class="co">##                displayName isSingle displayMember  data scenario</span></span>
<span><span class="co">## 5            Distributions    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 7       External Variables    FALSE           N/A FALSE        1</span></span>
<span><span class="co">## 15                Pipeline    FALSE           N/A  TRUE        1</span></span>
<span><span class="co">## 21 Spatial Multiprocessing     TRUE           N/A FALSE        1</span></span>
<span><span class="co">## 27                  Inputs     TRUE           N/A  TRUE        1</span></span>
<span><span class="co">## 28    Intermediate Outputs    FALSE           N/A  TRUE        1</span></span>
<span><span class="co">## 29                 Outputs    FALSE           N/A  TRUE        1</span></span>
<span><span class="co">## 30             Run Control     TRUE           N/A  TRUE        1</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="view-results">View results<a class="anchor" aria-label="anchor" href="#view-results"></a>
</h2>
<p>The next step is to view the output datasheets added to the result
scenario when it was run.</p>
<div class="section level3">
<h3 id="viewing-intermediate-results-with-datasheet">Viewing intermediate results with <code>datasheet()</code><a class="anchor" aria-label="anchor" href="#viewing-intermediate-results-with-datasheet"></a>
</h3>
<p>First, we will view the <code>Intermediate Outputs</code> datasheet
from the result scenario. We can load the result tables using the
<code><a href="../reference/datasheet.html">datasheet()</a></code> function. The <code>Intermediate Outputs</code>
datasheet corresponds to the results from the
<code>Hello World Pipeline 1</code> transformer stage.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Results of first scenario</span></span>
<span><span class="va">resultsSummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myResultScenario</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"helloworldPipeline_IntermediateDatasheet"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">resultsSummary</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Iteration Timestep         y</span></span>
<span><span class="co">## 1         1        1  6.423785</span></span>
<span><span class="co">## 2         1        2  9.847570</span></span>
<span><span class="co">## 3         1        3 13.271354</span></span>
<span><span class="co">## 4         1        4 16.695139</span></span>
<span><span class="co">## 5         1        5 20.118924</span></span>
<span><span class="co">## 6         1        6 23.542709</span></span></code></pre>
<p>We can see that for every timestep in an iteration we have a new
value of <em>y</em> corresponding to <em>y=mt+b</em>.</p>
</div>
<div class="section level3">
<h3 id="viewing-final-results-with-datasheet">Viewing final results with <code>datasheet()</code><a class="anchor" aria-label="anchor" href="#viewing-final-results-with-datasheet"></a>
</h3>
<p>Now, we will view the final output datasheet from the result
scenario. Again, we will use <code><a href="../reference/datasheet.html">datasheet()</a></code> to load the result
table. The <code>Outputs</code> datasheet corresponds to the results
from the <code>Hello World Pipeline 2</code> transformer stage.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Results of first scenario</span></span>
<span><span class="va">resultsSummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myResultScenario</span>,</span>
<span>                            name <span class="op">=</span> <span class="st">"helloworldPipeline_OutputDatasheet"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results table</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">resultsSummary</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   Iteration Timestep      yCum</span></span>
<span><span class="co">## 1         1        1  6.423785</span></span>
<span><span class="co">## 2         1        2 16.271354</span></span>
<span><span class="co">## 3         1        3 29.542709</span></span>
<span><span class="co">## 4         1        4 46.237848</span></span>
<span><span class="co">## 5         1        5 66.356771</span></span>
<span><span class="co">## 6         1        6 89.899480</span></span></code></pre>
<p>We can see for each timestep in an iteration, we have a new value of
<em>yCum</em>, representing the cumulative value of <em>y</em> over
time.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Colin Daniel, Josie Hughes, Valentin Lucet, Alex Embrey, Katie Birchard, Leonardo Frid, Tabitha Kennedy, Shreeram Senthivasan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
