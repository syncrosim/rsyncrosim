<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`rsyncrosim`: introduction to `ST-Sim` • rsyncrosim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`rsyncrosim`: introduction to `ST-Sim`">
<meta property="og:description" content="rsyncrosim">
<meta property="og:image" content="https://syncrosim.github.io/rsyncrosim/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsyncrosim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a01_rsyncrosim_vignette_basic.html">Introduction to `rsyncrosim`</a>
    </li>
    <li>
      <a href="../articles/a02_rsyncrosim_vignette_uncertainty.html">`rsyncrosim`: introduction to uncertainty</a>
    </li>
    <li>
      <a href="../articles/a03_rsyncrosim_vignette_pipelines.html">`rsyncrosim`: introduction to pipelines</a>
    </li>
    <li>
      <a href="../articles/a04_rsyncrosim_vignette_spatial.html">`rsyncrosim`: introduction to spatial data</a>
    </li>
    <li>
      <a href="../articles/a05_rsyncrosim_stsim_vignette.html">`rsyncrosim`: introduction to `ST-Sim`</a>
    </li>
    <li>
      <a href="../articles/a06_rsyncrosim_install_github.html">Installing GitHub release</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/syncrosim/rsyncrosim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="a05_rsyncrosim_stsim_vignette_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>rsyncrosim</code>: introduction to <code>ST-Sim</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/syncrosim/rsyncrosim/blob/master/vignettes/a05_rsyncrosim_stsim_vignette.Rmd"><code>vignettes/a05_rsyncrosim_stsim_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>a05_rsyncrosim_stsim_vignette.Rmd</code></div>

    </div>

    
    
<p>This vignette will cover how to develop and run spatially-explicit, stochastic state-and-transition simulation models of landscape change using the <code>rsyncrosim</code> package within the <a href="https://syncrosim.com/">SyncroSim</a> software framework. For an overview of <a href="https://syncrosim.com/">SyncroSim</a> and <code>rsyncrosim</code>, as well as a basic usage tutorial for <code>rsyncrosim</code>, see the <a href="https://syncrosim.github.io/rsyncrosim/articles/a01_rsyncrosim_vignette_basic.html#setup-1">Introduction to <code>rsyncrosim</code></a> vignette.</p>
<div id="syncrosim-package-stsim" class="section level2">
<h2 class="hasAnchor">
<a href="#syncrosim-package-stsim" class="anchor"></a>SyncroSim Package: <code>stsim</code>
</h2>
<p>To demonstrate how to create and run spatially-explicit, stochastic state-and-transition simulation models (STSMs) of landscape change, we will be using the <a href="https://github.com/ApexRMS/stsim">stsim</a> SyncroSim package. STSMs are well-suited for integrating uncertainty into model projections, and have been applied to a variety of landscapes and management questions. In this <code>stsim</code> example below, we will model changes in forest cover types under two scenarios: no harvest within a landscape, and harvest of 20 acres per year. To do this, we will set a number of model parameters describing how many timesteps and iterations the model will run for, transition types and their probabilities, transition targets (particularly, for the harvest transition type), etc. Next, we will provide <code>stsim</code> with a set of initial conditions that describe the starting landscape at time 0, and specify parameters for the model’s output. After running both scenarios, we will view the output data in tabular form and as a raster layer. Spatial and non-spatial examples of this exercise are provided.</p>
<p>For more details on <code>stsim</code>, consult the <a href="https://docs.stsim.net/">ST-Sim online documentation</a>.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<div id="install-syncrosim" class="section level3">
<h3 class="hasAnchor">
<a href="#install-syncrosim" class="anchor"></a>Install SyncroSim</h3>
<p>Before using <code>rsyncrosim</code> you will first need to <a href="https://syncrosim.com/download/">download and install</a> the SyncroSim software. Versions of SyncroSim exist for both Windows and Linux.</p>
</div>
<div id="installing-and-loading-r-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-and-loading-r-packages" class="anchor"></a>Installing and loading R packages</h3>
<p>You will need to install the <code>rsyncrosim</code> R package, either using <a href="https://cran.r-project.org/" target="_blank">CRAN</a> or from the <code>rsyncrosim</code> <a href="https://github.com/syncrosim/rsyncrosim/releases/" target="_blank">GitHub repository</a>. Versions of <code>rsyncrosim</code> are available for both Windows and Linux. You may need to install the <code>raster</code> and <code>rgdal</code> packages from CRAN as well.</p>
<p>In a new R script, load the necessary packages. This includes the <code>rsyncrosim</code> and <code>raster</code> R packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load R packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://syncrosim.github.io/rsyncrosim">rsyncrosim</a></span><span class="op">)</span>  <span class="co"># package for working with SyncroSim</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>      <span class="co"># package for working with raster data</span></code></pre></div>
</div>
<div id="connecting-r-to-syncrosim-using-session" class="section level3">
<h3 class="hasAnchor">
<a href="#connecting-r-to-syncrosim-using-session" class="anchor"></a>Connecting R to SyncroSim using <code>session()</code>
</h3>
<p>Finish setting up the R environment for the <code>rsyncrosim</code> workflow by creating a SyncroSim Session object. Use the <code><a href="../reference/session.html">session()</a></code> function to connect R to your installed copy of the SyncroSim software.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="st">"path/to/install_folder"</span><span class="op">)</span>      <span class="co"># Create a Session based SyncroSim install folder</span>
<span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="op">)</span>                              <span class="co"># Using default install folder (Windows only)</span>
<span class="va">mySession</span>                                           <span class="co"># Displays the Session object</span></code></pre></div>
<pre><code>## class               : Session
## filepath [character]: C:/Program Files/SyncroSim
## silent [logical]    : TRUE
## printCmd [logical]  : FALSE</code></pre>
<p>Use the <code><a href="../reference/version.html">version()</a></code> function to ensure you are using the latest version of SyncroSim.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/version.html">version</a></span><span class="op">(</span><span class="va">mySession</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2.3.5"</code></pre>
</div>
<div id="installing-syncrosim-packages-using-addpackage" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-syncrosim-packages-using-addpackage" class="anchor"></a>Installing SyncroSim packages using <code>addPackage()</code>
</h3>
<p>Install <code>stsim</code> using the <code>rsyncrosim</code> function <code><a href="../reference/addPackage.html">addPackage()</a></code>. This function takes a package name as input and then queries the SyncroSim package server for the specified package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install stsim</span>
<span class="fu"><a href="../reference/addPackage.html">addPackage</a></span><span class="op">(</span><span class="st">"stsim"</span><span class="op">)</span></code></pre></div>
<pre><code>## Package &lt;stsim&gt; installed</code></pre>
<p><code>stsim</code> should now be included in the package list returned by the <code><a href="../reference/package.html">package()</a></code> function in <code>rsyncrosim</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get list of installed packages</span>
<span class="fu"><a href="../reference/package.html">package</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##    name                                      description version
## 1 stsim The ST-Sim state-and-transition simulation model   3.3.3</code></pre>
</div>
</div>
<div id="create-a-modeling-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-modeling-workflow" class="anchor"></a>Create a modeling workflow</h2>
<p>When creating a new modeling workflow from scratch, we need to create objects of the following scopes:</p>
<ul>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Library</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Projects</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Scenarios</a></li>
</ul>
<p>For more information on these scopes, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_basic.html">Introduction to <code>rsyncrosim</code></a> vignette.</p>
<div id="set-up-library-project-and-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#set-up-library-project-and-scenario" class="anchor"></a>Set up Library, Project, and Scenario</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new Library</span>
<span class="va">myLibrary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ssimLibrary.html">ssimLibrary</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"stsimLibrary.ssim"</span>,
                         session <span class="op">=</span> <span class="va">mySession</span>,
                         package <span class="op">=</span> <span class="st">"stsim"</span>,
                         overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Open the default Project</span>
<span class="va">myProject</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myLibrary</span>, project <span class="op">=</span> <span class="st">"Definitions"</span><span class="op">)</span>

<span class="co"># Create a new Scenario (associated with the default Project)</span>
<span class="va">myScenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myProject</span>, scenario <span class="op">=</span> <span class="st">"My spatial scenario"</span><span class="op">)</span></code></pre></div>
</div>
<div id="view-model-inputs-using-datasheet" class="section level3">
<h3 class="hasAnchor">
<a href="#view-model-inputs-using-datasheet" class="anchor"></a>View model inputs using <code>datasheet()</code>
</h3>
<p>View the Datasheets associated with your new Project and Scenario using the <code><a href="../reference/datasheet.html">datasheet()</a></code> function from <code>rsyncrosim</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># View all Datasheets associated with a Library, Project, or Scenario</span>
<span class="va">datasheet_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">datasheet_list</span><span class="op">)</span></code></pre></div>
<pre><code>##     scope                      name          displayName
## 1 project            stsim_AgeGroup           Age Groups
## 2 project             stsim_AgeType            Age Types
## 3 project      stsim_AttributeGroup      Attribute Group
## 4 project stsim_PatchPrioritization Patch Prioritization
## 5 project    stsim_SecondaryStratum     Secondary Strata
## 6 project           stsim_SizeClass         Size Classes</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">tail</a></span><span class="op">(</span><span class="va">datasheet_list</span><span class="op">)</span></code></pre></div>
<pre><code>##       scope                                        name
## 77 scenario             stsim_TransitionSlopeMultiplier
## 78 scenario stsim_TransitionSpatialInitiationMultiplier
## 79 scenario           stsim_TransitionSpatialMultiplier
## 80 scenario          stsim_TransitionSpreadDistribution
## 81 scenario                      stsim_TransitionTarget
## 82 scenario        stsim_TransitionTargetPrioritization
##                                  displayName
## 77              Transition Slope Multipliers
## 78 Transition Spatial Initiation Multipliers
## 79            Transition Spatial Multipliers
## 80            Transition Spread Distribution
## 81                        Transition Targets
## 82          Transition Target Prioritization</code></pre>
<p>From this list of Datasheets, we can check which Datasheets specific to the <code>stsim</code> package we would like to modify. This will include a number of Initial Conditions Datasheets, Output Datasheets, and a Run Control Datasheet. For more information about all <code>stsim</code> Datasheets, see <a href="https://docs.stsim.net/reference/properties.html" target="_blank">the online documentation</a>.</p>
</div>
<div id="configure-model-inputs-using-datasheet-and-addrow" class="section level3">
<h3 class="hasAnchor">
<a href="#configure-model-inputs-using-datasheet-and-addrow" class="anchor"></a>Configure model inputs using <code>datasheet()</code> and <code>addRow()</code>
</h3>
<p>Now, we will add some values to these Datasheets so we can run our models.</p>
<p>Inputs for <code>stsim</code> come in two forms: Scenario inputs (which <em>can</em> vary by Scenario) and Project inputs (which <em>must</em> be fixed across all Scenarios). In general most inputs are Scenario inputs; Project inputs are typically reserved for values that must be shared by all Scenarios (e.g. constants, shared lookup values). We refer to Project input Datasheets as <em>Project-scoped Datasheets</em> and Scenario input Datasheets as <em>Scenario-scoped Datasheets</em>. We will start by retrieving some Project-scoped input Datasheets to add and edit their values.</p>
<div id="project-scoped-datasheets" class="section level4">
<h4 class="hasAnchor">
<a href="#project-scoped-datasheets" class="anchor"></a>Project-scoped Datasheets</h4>
<p><strong>Terminology</strong>: The Project-scoped Datasheet called <code>Terminology</code> specifies terms used across all Scenarios in the same Project.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load the Terminology Datasheet to a new R data frame </span>
<span class="va">terminology</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myProject</span>, name <span class="op">=</span> <span class="st">"stsim_Terminology"</span><span class="op">)</span>

<span class="co"># Check the columns of the Terminology data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">terminology</span><span class="op">)</span></code></pre></div>
<pre><code>## 'data.frame':    1 obs. of  8 variables:
##  $ AmountLabel          : chr "Area"
##  $ AmountUnits          : Factor w/ 4 levels "Acres","Hectares",..: 1
##  $ StateLabelX          : chr "Class"
##  $ StateLabelY          : chr "Subclass"
##  $ PrimaryStratumLabel  : chr "Primary Stratum"
##  $ SecondaryStratumLabel: chr "Secondary Stratum"
##  $ TertiaryStratumLabel : chr "Tertiary Stratum"
##  $ TimestepUnits        : chr "Timestep"</code></pre>
<p>We can change the terminology of the <code>StateLabelX</code> and <code>AmountUnits</code> columns in this Datasheet, and then save those changes back to the SyncroSim Library file.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Edit the values of the StateLabelX and AmountUnits columns</span>
<span class="va">terminology</span><span class="op">$</span><span class="va">AmountUnits</span> <span class="op">&lt;-</span> <span class="st">"Hectares"</span>
<span class="va">terminology</span><span class="op">$</span><span class="va">StateLabelX</span> <span class="op">&lt;-</span> <span class="st">"Forest Type"</span>

<span class="co"># Saves edits as a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">terminology</span>, <span class="st">"stsim_Terminology"</span><span class="op">)</span> </code></pre></div>
<pre><code>## Datasheet &lt;stsim_Terminology&gt; saved</code></pre>
<p>Similarly, we can edit other Project-scoped Datasheets for ‘stsim’.</p>
<p><strong>Stratum</strong>: Primary Strata in the model</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load a copy of the Stratum Datasheet.</span>
<span class="co"># To load an empty copy of this Datasheet, specify the argument empty = TRUE in the datasheet() function.</span>
<span class="va">stratum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="st">"stsim_Stratum"</span>, empty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Use the addRow() to add a value to the stratum  data frame</span>
<span class="va">stratum</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">stratum</span>, <span class="st">"Entire Forest"</span><span class="op">)</span>

<span class="co"># Save edits as a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">stratum</span>, <span class="st">"stsim_Stratum"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_Stratum&gt; saved</code></pre>
<p><strong>StateLabelX</strong>: First dimension of labels for State Classes</p>
<p>It is also possible to add values to a Datasheet without loading it into R. Below we create a vector of <code>forestTypes</code> and add this to the <code>stsim_StateLabelX</code> Datasheet as a data frame using <code><a href="../reference/saveDatasheet.html">saveDatasheet()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a vector containing the State Class labels </span>
<span class="va">forestTypes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Coniferous"</span>, <span class="st">"Deciduous"</span>, <span class="st">"Mixed"</span><span class="op">)</span>

<span class="co"># Add values as a data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="va">forestTypes</span><span class="op">)</span>, <span class="st">"stsim_StateLabelX"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_StateLabelX&gt; saved</code></pre>
<p><strong>StateLabelY</strong>: Second dimension of labels for State Classes</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Add values as a data frame directly to an stsim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"All"</span><span class="op">)</span><span class="op">)</span>, <span class="st">"stsim_StateLabelY"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_StateLabelY&gt; saved</code></pre>
<p><strong>State Classes</strong>: Combine <code>StateLabelX</code> and <code>StateLabelY</code>, and assign each class a unique name and ID</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new R data frame containing the names of the State Classes and their corresponding data</span>
<span class="va">stateClasses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="va">forestTypes</span><span class="op">)</span>
<span class="va">stateClasses</span><span class="op">$</span><span class="va">StateLabelXID</span> <span class="op">&lt;-</span> <span class="va">stateClasses</span><span class="op">$</span><span class="va">Name</span>
<span class="va">stateClasses</span><span class="op">$</span><span class="va">StateLabelYID</span> <span class="op">&lt;-</span> <span class="st">"All"</span>
<span class="va">stateClasses</span><span class="op">$</span><span class="va">ID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>

<span class="co"># Save stateClasses R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">stateClasses</span>, <span class="st">"stsim_StateClass"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_StateClass&gt; saved</code></pre>
<p><strong>Transition Types</strong>: Assign a unique name and ID to each type of transition in our model.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an R data frame containing transition type data </span>
<span class="va">transitionTypes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Fire"</span>, <span class="st">"Harvest"</span>, <span class="st">"Succession"</span><span class="op">)</span>, ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Save transitionTypes R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">transitionTypes</span>, <span class="st">"stsim_TransitionType"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_TransitionType&gt; saved</code></pre>
<p><strong>Transition Groups</strong>: Create Transition Groups identical to the Types</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an R data frame containing a column of transition type names </span>
<span class="va">transitionGroups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Fire"</span>, <span class="st">"Harvest"</span>, <span class="st">"Succession"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Save transitionGroups R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">transitionGroups</span>, <span class="st">"TransitionGroup"</span>, force <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_TransitionGroup&gt; saved</code></pre>
<p><strong>Transition Types by Groups</strong>: Assign each Type to its Group</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an R data frame that contains Transition Type Group names</span>
<span class="va">transitionTypesGroups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>TransitionTypeID <span class="op">=</span> <span class="va">transitionTypes</span><span class="op">$</span><span class="va">Name</span>,
                                    TransitionGroupID <span class="op">=</span> <span class="va">transitionGroups</span><span class="op">$</span><span class="va">Name</span><span class="op">)</span>

<span class="co"># Save transitionTypesGroups R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="va">transitionTypesGroups</span>, <span class="st">"TransitionTypeGroup"</span>, force <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_TransitionTypeGroup&gt; saved</code></pre>
<p><strong>Ages</strong>: Define the basic parameters to control the age reporting in the model</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define values for age reporting</span>
<span class="va">ageFrequency</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">ageMax</span> <span class="op">&lt;-</span> <span class="fl">101</span>
<span class="va">ageGroups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">100</span><span class="op">)</span>

<span class="co"># Add values as R data frames to the appropriate SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Frequency <span class="op">=</span> <span class="va">ageFrequency</span>, MaximumAge <span class="op">=</span> <span class="va">ageMax</span><span class="op">)</span>,
              <span class="st">"AgeType"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_AgeType&gt; saved</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>MaximumAge <span class="op">=</span> <span class="va">ageGroups</span><span class="op">)</span>, <span class="st">"stsim_AgeGroup"</span>, force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_AgeGroup&gt; saved</code></pre>
</div>
<div id="scenario-scoped-datasheets" class="section level4">
<h4 class="hasAnchor">
<a href="#scenario-scoped-datasheets" class="anchor"></a>Scenario-scoped Datasheets</h4>
<p>Now that we have defined all our Project-scoped input Datasheets, we can move on to specifying Scenario-specific model inputs. We begin by using the <code>scenario</code> function to create a new Scenario in our Project.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new SyncroSim Scenario</span>
<span class="va">myScenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span><span class="va">myProject</span>, <span class="st">"No Harvest"</span><span class="op">)</span></code></pre></div>
<p>Once again we can use the <code><a href="../reference/datasheet.html">datasheet()</a></code> function (with <code>summary=TRUE</code>) to display all the Scenario-scoped Datasheets.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Subset the full Datasheet list to show only Scenario-scoped Datasheets</span>
<span class="va">scenario_datasheet_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/subset.html">subset</a></span><span class="op">(</span><span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, summary <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                                  <span class="va">scope</span> <span class="op">==</span> <span class="st">"scenario"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">scenario_datasheet_list</span><span class="op">)</span></code></pre></div>
<pre><code>##       scope                                          name
## 22 scenario                 stsim_DeterministicTransition
## 23 scenario                   stsim_DigitalElevationModel
## 24 scenario                       stsim_DistributionValue
## 25 scenario             stsim_InitialConditionsNonSpatial
## 26 scenario stsim_InitialConditionsNonSpatialDistribution
## 27 scenario                stsim_InitialConditionsSpatial
##                         displayName
## 22                           States
## 23          Digital Elevation Model
## 24                    Distributions
## 25   Initial Conditions Non Spatial
## 26       Initial Cond. Distribution
## 27 Initial Conditions Spatial Files</code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">tail</a></span><span class="op">(</span><span class="va">scenario_datasheet_list</span><span class="op">)</span></code></pre></div>
<pre><code>##       scope                                        name
## 77 scenario             stsim_TransitionSlopeMultiplier
## 78 scenario stsim_TransitionSpatialInitiationMultiplier
## 79 scenario           stsim_TransitionSpatialMultiplier
## 80 scenario          stsim_TransitionSpreadDistribution
## 81 scenario                      stsim_TransitionTarget
## 82 scenario        stsim_TransitionTargetPrioritization
##                                  displayName
## 77              Transition Slope Multipliers
## 78 Transition Spatial Initiation Multipliers
## 79            Transition Spatial Multipliers
## 80            Transition Spread Distribution
## 81                        Transition Targets
## 82          Transition Target Prioritization</code></pre>
<p>We can now use the <code><a href="../reference/datasheet.html">datasheet()</a></code> function to retrieve, one at a time, each of our Scenario-scoped Datasheets from our Library.</p>
<p><strong>Run Control</strong>: Define the length of the run and whether or not it is a spatial run (requires spatial inputs to be set, see below). Here we make the run spatial.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an R data frame specifying to run the simulation for 7 realizations and 10 timesteps</span>
<span class="va">runControl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>MaximumIteration <span class="op">=</span> <span class="fl">7</span>,
                         MinimumTimestep <span class="op">=</span> <span class="fl">0</span>,
                         MaximumTimestep <span class="op">=</span> <span class="fl">10</span>,
                         isSpatial <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Save transitionTypesGroups R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">runControl</span>, <span class="st">"stsim_RunControl"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_RunControl&gt; saved</code></pre>
<p><strong>Deterministic Transitions</strong>: Define transitions that take place in the absence of probabilistic transitions. Here we also set the age boundaries for each State Class.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load  an empty Deterministic Transitions Datasheet to a new R data frame</span>
<span class="va">dTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="st">"stsim_DeterministicTransition"</span>, optional <span class="op">=</span> <span class="cn">T</span>, empty <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>

<span class="co"># Add all Deterministic Transitions to the R data frame</span>
<span class="va">dTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">dTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>StateClassIDSource <span class="op">=</span> <span class="st">"Coniferous"</span>,
                                                StateClassIDDest <span class="op">=</span> <span class="st">"Coniferous"</span>,
                                                AgeMin <span class="op">=</span> <span class="fl">21</span>,
                                                Location <span class="op">=</span> <span class="st">"C1"</span><span class="op">)</span><span class="op">)</span>
<span class="va">dTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">dTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>StateClassIDSource <span class="op">=</span> <span class="st">"Deciduous"</span>,
                                                StateClassIDDest <span class="op">=</span> <span class="st">"Deciduous"</span>,
                                                Location <span class="op">=</span> <span class="st">"A1"</span><span class="op">)</span><span class="op">)</span>
<span class="va">dTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">dTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>StateClassIDSource <span class="op">=</span> <span class="st">"Mixed"</span>,
                                                StateClassIDDest <span class="op">=</span> <span class="st">"Mixed"</span>,
                                                AgeMin <span class="op">=</span> <span class="fl">11</span>,
                                                 Location <span class="op">=</span> <span class="st">"B1"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Save dTransitions R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">dTransitions</span>, <span class="st">"stsim_DeterministicTransition"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_DeterministicTransition&gt; saved</code></pre>
<p><strong>Probabilistic Transitions</strong>: Define transitions between State Classes and assigns a probability to each.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load  an empty Probabilistic Transitions Datasheet to a new R data frame</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="st">"stsim_Transition"</span>, optional <span class="op">=</span> <span class="cn">T</span>,
                          empty <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>

<span class="co"># Add all Probabilistic Transitions to the R data frame</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Coniferous"</span>, 
  StateClassIDDest <span class="op">=</span> <span class="st">"Deciduous"</span>, 
  TransitionTypeID <span class="op">=</span> <span class="st">"Fire"</span>, 
  Probability <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span><span class="op">)</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Coniferous"</span>,
  StateClassIDDest <span class="op">=</span> <span class="st">"Deciduous"</span>, 
  TransitionTypeID <span class="op">=</span> <span class="st">"Harvest"</span>, 
  Probability <span class="op">=</span> <span class="fl">1</span>, 
  AgeMin <span class="op">=</span> <span class="fl">40</span><span class="op">)</span><span class="op">)</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Deciduous"</span>,
  StateClassIDDest <span class="op">=</span> <span class="st">"Deciduous"</span>, 
  TransitionTypeID <span class="op">=</span> <span class="st">"Fire"</span>, 
  Probability <span class="op">=</span> <span class="fl">0.002</span><span class="op">)</span><span class="op">)</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Deciduous"</span>,
  StateClassIDDest <span class="op">=</span> <span class="st">"Mixed"</span>, 
  TransitionTypeID <span class="op">=</span> <span class="st">"Succession"</span>, 
  Probability <span class="op">=</span> <span class="fl">0.1</span>, 
  AgeMin <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Mixed"</span>, 
  StateClassIDDest <span class="op">=</span> <span class="st">"Deciduous"</span>, 
  TransitionTypeID <span class="op">=</span> <span class="st">"Fire"</span>, 
  Probability <span class="op">=</span> <span class="fl">0.005</span><span class="op">)</span><span class="op">)</span>
<span class="va">pTransitions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">pTransitions</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  StateClassIDSource <span class="op">=</span> <span class="st">"Mixed"</span>, 
  StateClassIDDest <span class="op">=</span> <span class="st">"Coniferous"</span>,
  TransitionTypeID <span class="op">=</span> <span class="st">"Succession"</span>, 
  Probability <span class="op">=</span> <span class="fl">0.1</span>, 
  AgeMin <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Save pTransitions R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">pTransitions</span>, <span class="st">"stsim_Transition"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_Transition&gt; saved</code></pre>
<p><strong>Initial Conditions</strong>: Set the starting conditions of the model at time 0. There are two options for setting initial conditions: either spatial or non-spatial. In this example we will use spatial initial conditions; however, we also demonstrate how to set initial conditions non-spatially below.</p>
<ul>
<li>
<strong><em>Option 1 - Spatial</em></strong>. Let’s first take a look at our rasters. We will retrieve the sample raster files (in GeoTIFF format) provided with the <code>rsyncrosim</code> package.</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load sample .tif files</span>
<span class="va">stratumTif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"initial-stratum.tif"</span>, 
                          package <span class="op">=</span> <span class="st">"rsyncrosim"</span><span class="op">)</span>
<span class="va">sclassTif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"initial-sclass.tif"</span>, 
                         package <span class="op">=</span> <span class="st">"rsyncrosim"</span><span class="op">)</span>
<span class="va">ageTif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"initial-age.tif"</span>, 
                      package <span class="op">=</span> <span class="st">"rsyncrosim"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create raster layers from the .tif files</span>
<span class="va">rStratum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="va">stratumTif</span><span class="op">)</span>
<span class="va">rSclass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="va">sclassTif</span><span class="op">)</span>
<span class="va">rAge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span><span class="op">(</span><span class="va">ageTif</span><span class="op">)</span>

<span class="co"># Plot raster layers</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rStratum</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/plot%20initial%20conditions%20rasters-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rSclass</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/plot%20initial%20conditions%20rasters-2.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rAge</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/plot%20initial%20conditions%20rasters-3.png" width="480" style="display: block; margin: auto;"></p>
<p>We can add these rasters as model inputs using the <code>stsim_InitialConditionsSpatial</code> Datasheet.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create an R list of the input raster layers</span>
<span class="va">ICSpatial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>StratumFileName <span class="op">=</span> <span class="va">stratumTif</span>, 
                  StateClassFileName <span class="op">=</span> <span class="va">sclassTif</span>, 
                  AgeFileName <span class="op">=</span> <span class="va">ageTif</span><span class="op">)</span>

<span class="co"># Save initialConditionsSpatial R list to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">ICSpatial</span>, <span class="st">"stsim_InitialConditionsSpatial"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_InitialConditionsSpatial&gt; saved</code></pre>
<p>Let’s check if the rasters were entered correctly. We can extract rasters with the <code><a href="../reference/datasheetRaster.html">datasheetRaster()</a></code> function.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load input raster layers from the `stsim_InitialConditionsSpatial` Datasheet.</span>
<span class="va">rStratumTest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheetRaster.html">datasheetRaster</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="st">"stsim_InitialConditionsSpatial"</span>,
                                <span class="st">"StratumFileName"</span><span class="op">)</span>
<span class="va">rSclassTest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheetRaster.html">datasheetRaster</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="st">"stsim_InitialConditionsSpatial"</span>,
                               <span class="st">"StateClassFileName"</span><span class="op">)</span>
<span class="va">rAgeTest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheetRaster.html">datasheetRaster</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="st">"stsim_InitialConditionsSpatial"</span>,
                            <span class="st">"AgeFileName"</span><span class="op">)</span>

<span class="co"># Plot raster layers</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rStratumTest</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/check%20initial%20conditions%20rasters-1.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rSclassTest</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/check%20initial%20conditions%20rasters-2.png" width="480" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rAgeTest</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/check%20initial%20conditions%20rasters-3.png" width="480" style="display: block; margin: auto;"></p>
<ul>
<li>
<strong><em>Option 2 - Non-spatial</em></strong>. The second option is to set the proportions of each class, making this a non-spatial parameterization. To do so, we use the <code>stsim_InitialConditionsNonSpatial</code> and <code>stsim_InitialConditionsNonSpatialDistribution</code> datasheets:</li>
</ul>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create non-spatial initial conditions data and add it to an R data frame</span>
<span class="va">ICNonSpatial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>TotalAmount <span class="op">=</span> <span class="fl">100</span>, 
                           NumCells <span class="op">=</span> <span class="fl">100</span>, 
                           CalcFromDist <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>

<span class="co"># Save the ICNonSpatial R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">ICNonSpatial</span>, <span class="st">"stsim_InitialConditionsNonSpatial"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_InitialConditionsNonSpatial&gt; saved</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create non-spatial initial conditions distribution data and add it to an R data frame</span>
<span class="va">ICNonSpatialDistribution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>StratumID <span class="op">=</span> <span class="st">"Entire Forest"</span>, 
                                       StateClassID <span class="op">=</span> <span class="st">"Coniferous"</span>, 
                                       RelativeAmount <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="co"># Save the ICNonSpatial R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">ICNonSpatialDistribution</span>,
              <span class="st">"stsim_InitialConditionsNonSpatialDistribution"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_InitialConditionsNonSpatialDistribution&gt; saved</code></pre>
<p><strong>Transition Targets</strong>: Define targets, in units of area, to be reached by the allocation procedure within SyncroSim.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Set the transition target for harvest to 0</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, 
              <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>TransitionGroupID <span class="op">=</span> <span class="st">"Harvest"</span>, 
                         Amount <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
              <span class="st">"stsim_TransitionTarget"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_TransitionTarget&gt; saved</code></pre>
<p><strong>Output Options</strong>: Regulate the model outputs and determine the frequency at which syncrosim saves the model outputs.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create output options for spatial model and add it to an R data frame</span>
<span class="va">outputOptionsSpatial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  RasterOutputSC <span class="op">=</span> <span class="cn">T</span>, RasterOutputSCTimesteps <span class="op">=</span> <span class="fl">1</span>,
  RasterOutputTR <span class="op">=</span> <span class="cn">T</span>, RasterOutputTRTimesteps <span class="op">=</span> <span class="fl">1</span>,
  RasterOutputAge <span class="op">=</span> <span class="cn">T</span>, RasterOutputAgeTimesteps <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>

<span class="co"># Save the outputOptionsSpatial R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">outputOptionsSpatial</span>, <span class="st">"stsim_OutputOptionsSpatial"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_OutputOptionsSpatial&gt; saved</code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create output options for non-spatial model and add it to an R data frame</span>
<span class="va">outputOptionsNonSpatial</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>
  SummaryOutputSC <span class="op">=</span> <span class="cn">T</span>, SummaryOutputSCTimesteps <span class="op">=</span> <span class="fl">1</span>,
  SummaryOutputTR <span class="op">=</span> <span class="cn">T</span>, SummaryOutputTRTimesteps <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>

<span class="co"># Save the outputOptionsNonSpatial R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, <span class="va">outputOptionsNonSpatial</span>, <span class="st">"stsim_OutputOptions"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_OutputOptions&gt; saved</code></pre>
<p>We are done parameterizing our simple “No Harvest” Scenario. Let’s now define a new Scenario that implements forest harvesting. Below, we create a second “Harvest” Scenario that is a copy of the first Scenario, but with a harvest level of 20 acres/year.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a copy of the no harvest scenario (i.e myScenario) and name it myScenarioHarvest</span>
<span class="va">myScenarioHarvest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span><span class="va">myProject</span>, 
                              scenario <span class="op">=</span> <span class="st">"Harvest"</span>, 
                              sourceScenario <span class="op">=</span> <span class="va">myScenario</span><span class="op">)</span>

<span class="co"># Set the transition target for harvest to 20 acres/year</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span><span class="va">myScenarioHarvest</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>TransitionGroupID <span class="op">=</span> <span class="st">"Harvest"</span>, 
                                            Amount <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>, 
              <span class="st">"stsim_TransitionTarget"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;stsim_TransitionTarget&gt; saved</code></pre>
<p>We can display the harvest levels for both scenarios.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># View the transition targets for the Harvest and No Harvest scenarios</span>
<span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myProject</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Harvest"</span>, <span class="st">"No Harvest"</span><span class="op">)</span>, 
          name <span class="op">=</span> <span class="st">"stsim_TransitionTarget"</span><span class="op">)</span></code></pre></div>
<pre><code>##   ScenarioID ProjectID ScenarioName ParentID ParentName TransitionGroupID
## 1          2         1   No Harvest       NA       &lt;NA&gt;           Harvest
## 2          3         1      Harvest       NA       &lt;NA&gt;           Harvest
##   Amount
## 1      0
## 2     20</code></pre>
</div>
</div>
</div>
<div id="run-scenarios" class="section level2">
<h2 class="hasAnchor">
<a href="#run-scenarios" class="anchor"></a>Run Scenarios</h2>
<div id="setting-run-parameters-with-run" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-run-parameters-with-run" class="anchor"></a>Setting run parameters with <code>run()</code>
</h3>
<p>We will now run both Scenarios using the <code><a href="../reference/run.html">run()</a></code> function in <code>rsyncrosim</code>. Running a Scenario generates a corresponding new child Scenario, called a <em>Results Scenario</em>, which contains the results of the run along with a snapshot of all the model inputs. If we have a large modeling workflow and we want to parallelize the run using multiprocessing, we can set the <code>jobs</code> argument to be a value greater than one.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run both Scenarios</span>
<span class="va">myResultScenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">myProject</span>, scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Harvest"</span>, <span class="st">"No Harvest"</span><span class="op">)</span>, 
                     jobs <span class="op">=</span> <span class="fl">7</span>, summary <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Running scenario [3] Harvest"
## [1] "Running scenario [2] No Harvest"</code></pre>
</div>
</div>
<div id="view-results" class="section level2">
<h2 class="hasAnchor">
<a href="#view-results" class="anchor"></a>View results</h2>
<p>The next step is to view the output Datasheets added to the Result Scenario when it was run. To look at the results we first need to retrieve the unique <code>scenarioId</code> for each child <em>Result Scenario</em>.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve Scenario IDs</span>
<span class="va">resultIDNoHarvest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/subset.html">subset</a></span><span class="op">(</span><span class="va">myResultScenario</span>, 
                            <span class="va">parentID</span> <span class="op">==</span> <span class="fu"><a href="../reference/scenarioId.html">scenarioId</a></span><span class="op">(</span><span class="va">myScenario</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">scenarioId</span>
<span class="va">resultIDHarvest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/subset.html">subset</a></span><span class="op">(</span><span class="va">myResultScenario</span>, 
                          <span class="va">parentID</span> <span class="op">==</span> <span class="fu"><a href="../reference/scenarioId.html">scenarioId</a></span><span class="op">(</span><span class="va">myScenarioHarvest</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="va">scenarioId</span></code></pre></div>
<p>We can now retrieve tabular output regarding the projected State Class over time (for both scenarios combined) from the <code>stsim_OutputStratumState</code> Datasheet.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve output projected State Class for both Scenarios in tabular form</span>
<span class="va">outputStratumState</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myProject</span>, 
                                scenario <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">resultIDNoHarvest</span>, <span class="va">resultIDHarvest</span><span class="op">)</span>, 
                                name <span class="op">=</span> <span class="st">"stsim_OutputStratumState"</span><span class="op">)</span></code></pre></div>
<p>Finally, we can get the State Class raster output (here for the Harvest scenario only).</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Retrieve the output State Class raster for the Harvest scenario at timestep 5</span>
<span class="va">myRastersTimestep5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheetRaster.html">datasheetRaster</a></span><span class="op">(</span><span class="va">myProject</span>, 
                                      scenario <span class="op">=</span> <span class="va">resultIDHarvest</span>, 
                                      <span class="st">"stsim_OutputSpatialState"</span>, 
                                      timestep <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="va">myRastersTimestep5</span></code></pre></div>
<pre><code>## class      : RasterStack 
## dimensions : 10, 10, 100, 7  (nrow, ncol, ncell, nlayers)
## resolution : 1, 1  (x, y)
## extent     : 0, 10, 0, 10  (xmin, xmax, ymin, ymax)
## crs        : +proj=utm +zone=10 +ellps=GRS80 +units=m +no_defs 
## names      :  sc.it1.ts5,  sc.it2.ts5,  sc.it3.ts5,  sc.it4.ts5,  sc.it5.ts5,  sc.it6.ts5,  sc.it7.ts5 
## min values : -2147483648, -2147483648, -2147483648, -2147483648, -2147483648, -2147483648, -2147483648 
## max values :  2147483647,  2147483647,  2147483647,  2147483647,  2147483647,  2147483647,  2147483647</code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Plot raster for the first realization of timestep 5</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">myRastersTimestep5</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p><img src="a05_rsyncrosim_stsim_vignette_files/figure-html/view%20myRastersTimestep5%20run-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Colin Daniel, Josie Hughes, Valentin Lucet, Alex Embrey, Katie Birchard, Leonardo Frid, Tabitha Kennedy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
