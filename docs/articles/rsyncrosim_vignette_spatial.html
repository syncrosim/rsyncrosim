<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>`rsyncrosim`: introduction to spatial data • rsyncrosim</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="`rsyncrosim`: introduction to spatial data">
<meta property="og:description" content="rsyncrosim">
<meta property="og:image" content="https://syncrosim.github.io/rsyncrosim/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rsyncrosim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/rsyncrosim_install_beta.html">Installing beta release</a>
    </li>
    <li>
      <a href="../articles/rsyncrosim_stsim_vignette.html">Introduction to `ST-Sim` in `rsyncrosim`</a>
    </li>
    <li>
      <a href="../articles/rsyncrosim_vignette_basic.html">Introduction to `rsyncrosim`</a>
    </li>
    <li>
      <a href="../articles/rsyncrosim_vignette_pipelines.html">`rsyncrosim`: introduction to pipelines</a>
    </li>
    <li>
      <a href="../articles/rsyncrosim_vignette_spatial.html">`rsyncrosim`: introduction to spatial data</a>
    </li>
    <li>
      <a href="../articles/rsyncrosim_vignette_uncertainty.html">`rsyncrosim`: introduction to uncertainty</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/syncrosim/rsyncrosim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="rsyncrosim_vignette_spatial_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>
<code>rsyncrosim</code>: introduction to spatial data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/syncrosim/rsyncrosim/blob/master/vignettes/rsyncrosim_vignette_spatial.Rmd"><code>vignettes/rsyncrosim_vignette_spatial.Rmd</code></a></small>
      <div class="hidden name"><code>rsyncrosim_vignette_spatial.Rmd</code></div>

    </div>

    
    
<p>This vignette will cover incorporating spatial data into SyncroSim models using the <code>rsyncrosim</code> package within the <a href="https://syncrosim.com/" target="_blank">SyncroSim</a> software framework. For an overview of <a href="https://syncrosim.com/" target="_blank">SyncroSim</a> and <a href="https://cran.r-project.org/web/packages/rsyncrosim/index.html" target="_blank"><code>rsyncrosim</code></a>, as well as a basic usage tutorial for <code>rsyncrosim</code>, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_basic.html">Introduction to <code>rsyncrosim</code></a> vignette. To learn how to use iterations in the <code>rsyncrosim</code> interface, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_uncertainty.html"><code>rsyncrosim</code>: introduction to uncertainty</a> vignette. To learn how to link models using pipelines in the <code>rsyncrosim</code> interface, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_pipelines.html"><code>rsyncrosim</code>: introduction to pipelines</a> vignette.</p>
<div id="syncrosim-package-helloworldspatial" class="section level2">
<h2 class="hasAnchor">
<a href="#syncrosim-package-helloworldspatial" class="anchor"></a>SyncroSim Package: helloworldSpatial</h2>
<p>To demonstrate how to use spatial data in the <code>rsyncrosim</code> interface, we will be using the <a href="https://github.com/ApexRMS/helloworldSpatial" target="_blank">helloworldSpatial</a> SyncroSim package. <code>helloworldSpatial</code> was designed to be a simple package to show off some key functionalities of SyncroSim, including the ability to use both spatial and non-spatial data.</p>
<p>The package takes 3 inputs, <em>mMean</em>, <em>mSD</em>, and a spatial raster file of intercept (<em>b</em>) values. For each iteration, a value <em>m</em>, representing the slope, is sampled from a normal distribution with mean of <em>mMean</em> and standard deviation of <em>mSD</em>. These values are run through 2 models to produce both spatial and non-spatial outputs.</p>
<div class="figure">
<img src="infographic-spatial.png" width="600" alt=""><p class="caption">Infographic of helloworldSpatial package</p>
</div>
<p>For more details on the different features of the <code>helloworldSpatial</code> SyncroSim package, consult the SyncroSim <a href="https://docs.syncrosim.com/how_to_guides/package_create_spatial.html" target="_blank">Enhancing a Package: Integrating Spatial Data</a> tutorial.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<div id="install-syncrosim" class="section level3">
<h3 class="hasAnchor">
<a href="#install-syncrosim" class="anchor"></a>Install SyncroSim</h3>
<p>Before using <code>rsyncrosim</code> you will first need to <a href="https://syncrosim.com/download/" target="_blank">download and install</a> the SyncroSim software. Versions of SyncroSim exist for both Windows and Linux.</p>
</div>
<div id="installing-and-loading-r-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-and-loading-r-packages" class="anchor"></a>Installing and loading R packages</h3>
<p>You will need to install the <code>rsyncrosim</code> R package, either using <a href="https://cran.r-project.org/" target="_blank">CRAN</a> or from the <code>rsyncrosim</code> <a href="https://github.com/syncrosim/rsyncrosim/releases/" target="_blank">GitHub repository</a>. Versions of <code>rsyncrosim</code> are available for both Windows and Linux. You may need to install the <code>raster</code> and <code>rgdal</code> packages from CRAN as well.</p>
<p>In a new R script, load the necessary packages. This includes the <code>rsyncrosim</code> and <code>raster</code> R packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load R packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://syncrosim.github.io/rsyncrosim">rsyncrosim</a></span><span class="op">)</span>  <span class="co"># package for working with SyncroSim</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span>      <span class="co"># package for working with raster data</span></code></pre></div>
<pre><code>## Loading required package: sp</code></pre>
</div>
<div id="installing-syncrosim-packages-using-installPackage" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-syncrosim-packages-using-installPackage" class="anchor"></a>Installing SyncroSim packages using <code>installPackage()</code>
</h3>
<p>Install <code>helloworldSpatial</code> using the <code>rynscrosim</code> function <code><a href="../reference/installPackage.html">installPackage()</a></code>. This function takes a package name as input and then queries the SyncroSim package server for the specified package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install helloworldSpatial</span>
<span class="fu"><a href="../reference/installPackage.html">installPackage</a></span><span class="op">(</span><span class="st">"helloworldSpatial"</span><span class="op">)</span></code></pre></div>
<pre><code>## Package &lt;helloworldSpatial&gt; installed</code></pre>
<p><code>helloworldSpatial</code> should now be included in the package list returned by the <code><a href="../reference/package.html">package()</a></code> function in <code>rsyncrosim</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get list of installed packages</span>
<span class="fu"><a href="../reference/package.html">package</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##                name                                   description version
## 1 helloworldSpatial Example demonstrating how to use spatial data   1.0.0</code></pre>
</div>
<div id="connecting-r-to-syncrosim-using-session" class="section level3">
<h3 class="hasAnchor">
<a href="#connecting-r-to-syncrosim-using-session" class="anchor"></a>Connecting R to SyncroSim using <code>session()</code>
</h3>
<p>Finish setting up the R environment for the <code>rsyncrosim</code> workflow by creating a SyncroSim Session object. Use the <code><a href="../reference/session.html">session()</a></code> function to connect R to your installed copy of the SyncroSim software.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="st">"path/to/install_folder"</span><span class="op">)</span>      <span class="co"># Create a Session based SyncroSim install folder</span>
<span class="va">mySession</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/session.html">session</a></span><span class="op">(</span><span class="op">)</span>                              <span class="co"># Using default install folder (Windows only)</span>
<span class="va">mySession</span>                                           <span class="co"># Displays the Session object</span></code></pre></div>
<pre><code>## class               : Session
## filepath [character]: C:/Program Files/SyncroSim
## silent [logical]    : TRUE
## printCmd [logical]  : FALSE</code></pre>
<p>Use the <code><a href="../reference/version.html">version()</a></code> function to ensure you are using the latest version of SyncroSim.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/version.html">version</a></span><span class="op">(</span><span class="va">mySession</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2.3.3"</code></pre>
</div>
</div>
<div id="create-a-modeling-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-modeling-workflow" class="anchor"></a>Create a modeling workflow</h2>
<p>When creating a new modeling workflow from scratch, we need to create objects of the following scopes:</p>
<ul>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Library</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Projects</a></li>
<li><a href="https://docs.syncrosim.com/how_to_guides/library_overview.html" target="_blank">Scenarios</a></li>
</ul>
<p>For more information on these scopes, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_basic.html">Introduction to <code>rsyncrosim</code></a> vignette.</p>
<div id="set-up-library-project-and-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#set-up-library-project-and-scenario" class="anchor"></a>Set up Library, Project, and Scenario</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create a new Library</span>
<span class="va">myLibrary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ssimLibrary.html">ssimLibrary</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"helloworldLibrary.ssim"</span>,
                         session <span class="op">=</span> <span class="va">mySession</span>,
                         package <span class="op">=</span> <span class="st">"helloworldSpatial"</span>,
                         overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># Open the default Project</span>
<span class="va">myProject</span> <span class="op">=</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myLibrary</span>, project <span class="op">=</span> <span class="st">"Definitions"</span><span class="op">)</span>

<span class="co"># Create a new Scenario (associated with the default Project)</span>
<span class="va">myScenario</span> <span class="op">=</span> <span class="fu"><a href="../reference/scenario.html">scenario</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myProject</span>, scenario <span class="op">=</span> <span class="st">"My spatial scenario"</span><span class="op">)</span></code></pre></div>
</div>
<div id="view-model-inputs-using-datasheet" class="section level3">
<h3 class="hasAnchor">
<a href="#view-model-inputs-using-datasheet" class="anchor"></a>View model inputs using <code>datasheet()</code>
</h3>
<p>View the Datasheets associated with your new Scenario using the <code><a href="../reference/datasheet.html">datasheet()</a></code> function from <code>rsyncrosim</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># View all Datasheets associated with a Library, Project, or Scenario</span>
<span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span><span class="op">)</span></code></pre></div>
<pre><code>##      scope                                    name           displayName
## 1 scenario        helloworldSpatial_InputDatasheet        InputDatasheet
## 2 scenario helloworldSpatial_IntermediateDatasheet IntermediateDatasheet
## 3 scenario       helloworldSpatial_OutputDatasheet       OutputDatasheet
## 4 scenario            helloworldSpatial_RunControl           Run Control</code></pre>
<p>From the list of Datasheets above, we can see that there are four Datasheets specific to the <code>helloworldSpatial</code> package, including an Input Datasheet, an Intermediate Datasheet, an Output Datasheet, and a Run Control Datasheet.</p>
</div>
<div id="configure-model-inputs-using-datasheet-and-addrow" class="section level3">
<h3 class="hasAnchor">
<a href="#configure-model-inputs-using-datasheet-and-addrow" class="anchor"></a>Configure model inputs using <code>datasheet()</code> and <code>addRow()</code>
</h3>
<p>Currently our input Scenario Datasheets are empty! We need to add some values to our input Datasheet (<code>InputDatasheet</code>) and run control Datasheet (<code>RunControl</code>) so we can run our model. Since this package also uses pipelines, we also need to add some information to the core <code>Pipeline</code> Datasheet to specify which models are run in which order. For more information on using pipelines, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_pipelines.html"><code>rsyncrosim</code>: introduction to pipelines</a> vignette and the SyncroSim <a href="https://docs.syncrosim.com/how_to_guides/package_create_pipelines.html" target="_blank">Enhancing a Package: Linking Models</a> tutorial.</p>
<p><strong>Input Datasheet</strong></p>
<p>First, assign the contents of the input Datasheet to a new data frame variable using <code><a href="../reference/datasheet.html">datasheet()</a></code>, then check the columns that need input values.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load input Datasheet to a new R data frame</span>
<span class="va">myInputDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>,
                              name <span class="op">=</span> <span class="st">"helloworldSpatial_InputDatasheet"</span><span class="op">)</span>

<span class="co"># Check the columns of the input data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">myInputDataframe</span><span class="op">)</span></code></pre></div>
<pre><code>## 'data.frame':    0 obs. of  3 variables:
##  $ mMean              : num 
##  $ mSD                : num 
##  $ InterceptRasterFile: chr</code></pre>
<p>The input Datasheet requires three values:</p>
<ul>
<li>
<code>mMean</code> : the mean of a normal distribution that will determine the slope of the linear equation.</li>
<li>
<code>mSD</code> : the standard deviation of a normal distribution that will determine the slope of the linear equation.</li>
<li>
<code>InterceptRasterFile</code> : the file path to a <em>raster image</em>, in which each cell of the image will be an intercept in the linear equation.</li>
</ul>
<p>In this example, the external file we are using for the <code>InterceptRasterFile</code> is a simple 5x5 raster TIF file generated using the <code>raster</code> package in R. The file used in this vignete can be found <a href="https://github.com/ApexRMS/helloworldSpatial/blob/main/images/input-raster.tif" target="_blank">here</a>.</p>
<div class="figure">
<img src="input-raster.png" alt=""><p class="caption">InterceptRasterFile input image</p>
</div>
<p>Add these values to a new data frame, then use the <code><a href="../reference/addRow.html">addRow()</a></code> function from <code>rsyncrosim</code> to update the input data frame</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create input data and add it to the input data frame</span>
<span class="va">myInputRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>mMean <span class="op">=</span> <span class="fl">0</span>, mSD <span class="op">=</span> <span class="fl">4</span>,
                         InterceptRasterFile <span class="op">=</span> <span class="st">"path/to/raster-image.tif"</span><span class="op">)</span>
<span class="va">myInputDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">myInputDataframe</span>, <span class="va">myInputRow</span><span class="op">)</span>

<span class="co"># Check values</span>
<span class="va">myInputDataframe</span></code></pre></div>
<pre><code>##   mMean mSD      InterceptRasterFile
## 1     0   4 path/to/raster-image.tif</code></pre>
<p>Finally, save the updated R data frame to a SyncroSim Datasheet using <code><a href="../reference/saveDatasheet.html">saveDatasheet()</a></code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Save input R data frame as a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, data <span class="op">=</span> <span class="va">myInputDataframe</span>,
              name <span class="op">=</span> <span class="st">"helloworldSpatial_InputDatasheet"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;helloworldSpatial_InputDatasheet&gt; saved</code></pre>
<p><strong>RunControl Datasheet</strong></p>
<p>The <code>RunControl</code> Datasheet sets the number of iterations and the minimum and maximum time steps for our model. We’ll assign the contents of this Datasheet to a new data frame variable as well and then add then update the information in the data frame using <code><a href="../reference/addRow.html">addRow()</a></code>. We need to specify data for the following four columns:</p>
<ul>
<li>
<code>MinimumIteration</code> : starting value of iterations (default=1).</li>
<li>
<code>MaximumIteration</code> : total number of iterations to run the model for.</li>
<li>
<code>MinimumTimestep</code> : the starting time point of the simulation.</li>
<li>
<code>MaximumTimestep</code> : the end time point of the simulation.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load RunControl Datasheet to an R data frame</span>
<span class="va">runSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, name <span class="op">=</span> <span class="st">"helloworldSpatial_RunControl"</span><span class="op">)</span>

<span class="co"># Check the columns of the run control data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">runSettings</span><span class="op">)</span></code></pre></div>
<pre><code>## 'data.frame':    0 obs. of  4 variables:
##  $ MinimumIteration: num 
##  $ MaximumIteration: num 
##  $ MinimumTimestep : num 
##  $ MaximumTimestep : num</code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create RunControl data and add it to the RunControl data frame</span>
<span class="va">runSettingsRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>MinimumIteration <span class="op">=</span> <span class="fl">1</span>,
                             MaximumIteration <span class="op">=</span> <span class="fl">5</span>,
                             MinimumTimestep <span class="op">=</span> <span class="fl">1</span>,
                             MaximumTimestep <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="va">runSettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">runSettings</span>, <span class="va">runSettingsRow</span><span class="op">)</span>

<span class="co"># Check values</span>
<span class="va">runSettings</span></code></pre></div>
<pre><code>##   MinimumIteration MaximumIteration MinimumTimestep MaximumTimestep
## 1                1                5               1              10</code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Save run control R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, data <span class="op">=</span> <span class="va">runSettings</span>,
              name <span class="op">=</span> <span class="st">"helloworldSpatial_RunControl"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;helloworldSpatial_RunControl&gt; saved</code></pre>
<p><strong>Pipeline Datasheet</strong></p>
<p>The <code>helloworldSpatial</code> package also makes use of pipelines to link the output of one model to the input of a second model. To learn more about pipelines, see the <a href="https://syncrosim.github.io/rsyncrosim/rsyncrosim_vignette_pipelines.html"><code>rsyncrosim</code>: introduction to pipelines</a> vignette and the SyncroSim <a href="https://docs.syncrosim.com/how_to_guides/package_create_pipelines.html" target="_blank">Enhancing a Package: Linking Models</a> tutorial.</p>
<p>To implement pipelines in our package, we need to specify the order in which to run the Transformers (i.e. models) in our pipeline by editing the <code>Pipeline</code> Datasheet. The <code>Pipeline</code> Datasheet is part of the built-in SyncroSim core, so we access it using the “core_” prefix with the <code><a href="../reference/datasheet.html">datasheet()</a></code> function. From viewing the structure of the <code>Pipeline</code> Datasheet we know that the <code>StageNameID</code> is a factor with two levels: “First Model” and “Second Model”. We will set the data for this Datasheet such that “First Model” is run first, then “Second Model”. This way, the output from “First Model” is used as the input for “Second Model”.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load Pipeline Datasheet to an R data frame</span>
<span class="va">myPipelineDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myScenario</span>, name <span class="op">=</span> <span class="st">"core_Pipeline"</span><span class="op">)</span>

<span class="co"># Check the columns of the Pipeline data frame</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">myPipelineDataframe</span><span class="op">)</span></code></pre></div>
<pre><code>## 'data.frame':    0 obs. of  2 variables:
##  $ StageNameID: Factor w/ 2 levels "First Model",..: 
##  $ RunOrder   : num</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Create Pipeline data and add it to the Pipeline data frame</span>
<span class="va">myPipelineRow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>StageNameID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"First Model"</span>, <span class="st">"Second Model"</span><span class="op">)</span>,
                            RunOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="va">myPipelineDataframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/addRow.html">addRow</a></span><span class="op">(</span><span class="va">myPipelineDataframe</span>, <span class="va">myPipelineRow</span><span class="op">)</span>

<span class="co"># Check values</span>
<span class="va">myPipelineDataframe</span></code></pre></div>
<pre><code>##    StageNameID RunOrder
## 1  First Model        1
## 2 Second Model        2</code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Save Pipeline R data frame to a SyncroSim Datasheet</span>
<span class="fu"><a href="../reference/saveDatasheet.html">saveDatasheet</a></span><span class="op">(</span>ssimObject <span class="op">=</span> <span class="va">myScenario</span>, data <span class="op">=</span> <span class="va">myPipelineDataframe</span>,
              name <span class="op">=</span> <span class="st">"core_Pipeline"</span><span class="op">)</span></code></pre></div>
<pre><code>## Datasheet &lt;core_Pipeline&gt; saved</code></pre>
</div>
</div>
<div id="run-scenarios" class="section level2">
<h2 class="hasAnchor">
<a href="#run-scenarios" class="anchor"></a>Run Scenarios</h2>
<div id="setting-run-parameters-with-run" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-run-parameters-with-run" class="anchor"></a>Setting run parameters with <code>run()</code>
</h3>
<p>We will now run our Scenario using the <code><a href="../reference/run.html">run()</a></code> function in <code>rsyncrosim</code>. If we have a large modeling workflow and we want to parallelize the run using multiprocessing, we can set the <code>jobs</code> argument to be a value greater than one.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Run the first Scenario we created</span>
<span class="va">myResultScenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run.html">run</a></span><span class="op">(</span><span class="va">myScenario</span>, jobs <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Running scenario [1] My spatial scenario"</code></pre>
<p>After the Scenario has been run, a Results Scenario is created that contains results in the output Datasheets.</p>
</div>
</div>
<div id="view-results" class="section level2">
<h2 class="hasAnchor">
<a href="#view-results" class="anchor"></a>View results</h2>
<p>The next step is to view the output Datasheets added to the Result Scenario when it was run.</p>
<div id="viewing-non-spatial-results-with-datasheet" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-non-spatial-results-with-datasheet" class="anchor"></a>Viewing non-spatial results with <code>datasheet()</code>
</h3>
<p>First, we will view the non-spatial results within the Results Scenarios. For each step in the pipeline, We can load the result tables using the <code><a href="../reference/datasheet.html">datasheet()</a></code> function.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load results of first Transformer in Pipeline</span>
<span class="va">resultsSummary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myResultScenario</span>,
                            name <span class="op">=</span> <span class="st">"helloworldSpatial_IntermediateDatasheet"</span><span class="op">)</span>

<span class="co"># View results table of first Transformer in Pipeline</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">resultsSummary</span><span class="op">)</span></code></pre></div>
<pre><code>##   Iteration Timestep        y        OutputRasterFile
## 1         1        1  80.2154 rasterMap_iter1_ts1.tif
## 2         1        2 164.7647 rasterMap_iter1_ts2.tif
## 3         1        3 249.3141 rasterMap_iter1_ts3.tif
## 4         1        4 333.8635 rasterMap_iter1_ts4.tif
## 5         1        5 418.4129 rasterMap_iter1_ts5.tif
## 6         1        6 502.9622 rasterMap_iter1_ts6.tif</code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load results of second Transformer in Pipeline</span>
<span class="va">resultsSummary2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheet.html">datasheet</a></span><span class="op">(</span><span class="va">myResultScenario</span>,
                             name <span class="op">=</span> <span class="st">"helloworldSpatial_OutputDatasheet"</span><span class="op">)</span>

<span class="co"># View results table of second Transformer in Pipeline</span>
<span class="fu"><a href="https://rdrr.io/pkg/raster/man/headtail.html">head</a></span><span class="op">(</span><span class="va">resultsSummary2</span><span class="op">)</span></code></pre></div>
<pre><code>##   Iteration Timestep      yCum
## 1         1        1   80.2154
## 2         1        2  244.9801
## 3         1        3  494.2942
## 4         1        4  828.1577
## 5         1        5 1246.5706
## 6         1        6 1749.5328</code></pre>
<p>From viewing these Datasheets, we can see that the spatial output is contained within the <code>IntermediateDatasheet</code>, in the column called <code>OutputRasterFile</code>.</p>
</div>
<div id="viewing-spatial-results-with-datasheetraster" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-spatial-results-with-datasheetraster" class="anchor"></a>Viewing spatial results with <code>datasheetRaster()</code>
</h3>
<p>For spatial results, we want to load the results as raster images. To do this, we will use the <code><a href="../reference/datasheetRaster.html">datasheetRaster()</a></code> function from <code>rsyncrosim</code>. The first argument is the result Scenario object. Next, we specify the name of the Datasheet containing raster images using the <code>datasheet</code> argument, amd the column pertaining to the raster images using the <code>column</code> argument. The results contain many raster images, since we have a raster for each combination of iteration and time step. We can use the <code>iteration</code> and <code>timestep</code> arguments to specify a single raster image or a subset of raster images we want to view.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load raster files for first result Scenario with time step and iteration</span>
<span class="va">rasterMaps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/datasheetRaster.html">datasheetRaster</a></span><span class="op">(</span>
  <span class="va">myResultScenario</span>,
  datasheet <span class="op">=</span> <span class="st">"helloworldSpatial_IntermediateDatasheet"</span>,
  column <span class="op">=</span> <span class="st">"OutputRasterFile"</span>,
  iteration <span class="op">=</span> <span class="fl">1</span>,
  timestep <span class="op">=</span> <span class="fl">5</span>
  <span class="op">)</span>

<span class="co"># View results</span>
<span class="va">rasterMaps</span></code></pre></div>
<pre><code>## class      : RasterLayer 
## dimensions : 5, 5, 25  (nrow, ncol, ncell)
## resolution : 0.4, 0.4  (x, y)
## extent     : -1, 1, -1, 1  (xmin, xmax, ymin, ymax)
## crs        : +proj=longlat +datum=WGS84 +no_defs 
## source     : rasterMap_iter1_ts5.tif 
## names      : rasterMap_iter1_ts5.it1.ts5 
## values     : 14.28406, 19.02831  (min, max)</code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">rasterMaps</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p><img src="rsyncrosim_vignette_spatial_files/figure-html/view%20results%20raster-1.png" width="700"></p>
</div>
<div id="viewing-spatial-results-in-the-syncrosim-windows-user-interface" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-spatial-results-in-the-syncrosim-windows-user-interface" class="anchor"></a>Viewing spatial results in the SyncroSim Windows User Interface</h3>
<p>To create maps using the Results Scenario we just generated, open the current Library in the User Interface and sync the updates from <code>rsyncrosim</code> using the “refresh” button in the upper toolbar. All the updates made in <code>rsyncrosim</code> should appear in the User Interface. We can now add the Results Scenario to the Results Viewer and create our maps. For more information on generating map in the User Interface, see the SyncroSim tutorials on <a href="http://docs.syncrosim.com/how_to_guides/results_map_create.html" target="_blank">creating</a> and <a href="http://docs.syncrosim.com/how_to_guides/results_map_customize.html" target="_blank">customizing</a> maps</p>
<div class="figure">
<img src="rsyncrosim-with-UI-spatial.png" width="600" alt=""><p class="caption">Using <code>rsyncrosim</code> with the SyncroSim Windows User Interface to map spatial data</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Colin Daniel, Josie Hughes, Valentin Lucet, Alex Embrey, Katie Birchard, Leonardo Frid, Tabitha Kennedy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
